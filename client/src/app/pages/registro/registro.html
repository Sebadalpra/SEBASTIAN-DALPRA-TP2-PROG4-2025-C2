<div class="row justify-content-center mt-4">
    <div class="col-md-8 col-lg-6">
        <div class="card shadow">
            <div class="card-body p-4">
                <div class="text-center mb-4">
                    <i class="bi bi-person-plus-fill text-primary" style="font-size: 3rem;"></i>
                    <h4 class="mt-3 fw-bold">Registro</h4>
                    <p class="text-muted">Bienvenido! Regístrate para acceder a nuestra Red Social</p>
                </div>

                <form [formGroup]="grupoRegistro" (ngSubmit)="enviarRegistro()">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="nombre" class="form-label">Nombre</label>
                            <input class="form-control" placeholder="Nombre" type="text" formControlName="nombre" name="nombre" id="nombre">
                            @if (nombre?.errors?.["required"] != null && nombre?.touched) {
                                <small class="text-danger">El nombre es requerido.</small>
                            }
                            @if (nombre?.errors?.["minlength"]) {
                                <small class="text-danger">El nombre debe tener al menos 3 caracteres.</small>
                            }
                            @if (nombre?.errors?.["pattern"]) {
                                <small class="text-danger">El nombre solo puede contener letras y espacios.</small>
                            }
                        </div>

                        <div class="col-md-6">
                            <label for="apellido" class="form-label">Apellido</label>
                            <input class="form-control" placeholder="Apellido" type="text" formControlName="apellido" name="apellido" id="apellido">
                            @if (apellido?.errors?.["required"] != null && apellido?.touched) {
                                <small class="text-danger">El apellido es requerido.</small>
                            }
                            @if (apellido?.errors?.["minlength"]) {
                                <small class="text-danger">El apellido debe tener al menos 3 caracteres.</small>
                            }
                            @if (apellido?.errors?.["pattern"]) {
                                <small class="text-danger">El apellido solo puede contener letras y espacios.</small>
                            }
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="email" class="form-label">Email</label>
                            <input class="form-control" placeholder="Email" type="email" formControlName="email" name="email" id="email">
                            @if(email?.errors?.["required"] != null && email?.touched) {
                                <small class="text-danger">El email es requerido.</small>
                            }
                            @if (email?.errors?.["email"]) {
                                <small class="text-danger">El email no es válido.</small>
                            }
                            @if (email?.errors?.["emailExiste"]) {
                                <small class="text-danger">El email ya está registrado.</small>
                            }
                        </div>

                        <div class="col-md-6">
                            <label for="fechaNacimiento" class="form-label">Fecha de Nacimiento</label>
                            <input class="form-control" type="date" formControlName="fechaNacimiento" name="fechaNacimiento" id="fechaNacimiento">
                            @if (fechaNac?.errors?.["required"] != null && fechaNac?.touched) {
                                <small class="text-danger">La fecha de nacimiento es requerida.</small>
                            }
                            @if (fechaNac?.errors?.["menorDeEdad"] && fechaNac?.touched) {
                                <small class="text-danger">Debes ser mayor de 18 años para registrarte.</small>
                            }
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="password" class="form-label">Contraseña</label>
                            <input class="form-control" placeholder="Contraseña" type="password" formControlName="password" name="password" id="password">
                            @if(password?.errors?.["required"] != null && password?.touched) {
                                <small class="text-danger">La contraseña es requerida.</small>
                            }
                            @if (password?.errors?.["minlength"]) {
                                <small class="text-danger">La contraseña debe tener al menos 8 caracteres.</small>
                            }
                            @if (password?.errors?.["pattern"]) {
                                <small class="text-danger">La contraseña debe tener al menos una mayúscula y un número.</small>
                            }
                        </div>

                        <div class="col-md-6">
                            <label for="confirmPassword" class="form-label">Confirmar Contraseña</label>
                            <input class="form-control" placeholder="Confirmar Contraseña" type="password" formControlName="confirmPassword" name="confirmPassword" id="confirmPassword">
                            @if (confirmPassword?.errors?.["required"] != null && confirmPassword?.touched) {
                                <small class="text-danger">La confirmación de la contraseña es requerida.</small>
                            }
                            @if (confirmPassword?.errors?.["minlength"]) {
                                <small class="text-danger">La confirmación de la contraseña debe tener al menos 8 caracteres.</small>
                            }
                            @if (confirmPassword?.errors?.["pattern"]) {
                                <small class="text-danger">La confirmación de la contraseña debe tener al menos una mayúscula y un número.</small>
                            }
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="userName" class="form-label">Nombre de Usuario</label>
                        <input class="form-control" type="text" placeholder="Nombre de Usuario" formControlName="userName" name="userName" id="userName">
                        @if (userName?.errors?.["required"] != null && userName?.touched) {
                            <small class="text-danger">El nombre de usuario es requerido.</small>
                        }
                        @if (userName?.errors?.["minlength"]) {
                            <small class="text-danger">El nombre de usuario debe tener al menos 3 caracteres.</small>
                        }
                        @if (userName?.errors?.["pattern"]) {
                            <small class="text-danger">El nombre de usuario solo puede contener letras y números.</small>
                        }
                    </div>

                    <div class="mb-3">
                        <label for="descripcion" class="form-label">Descripción (Opcional)</label>
                        <textarea class="form-control" rows="3" placeholder="Descripción breve" formControlName="descripcion"></textarea>
                        @if (descripcion?.errors?.["maxlength"]) {
                            <small class="text-danger">La descripción no puede exceder los 200 caracteres.</small>
                        }
                    </div>

                    <div class="mb-4">
                        <label for="imagen" class="form-label">Foto de Perfil (Opcional)</label>
                        <input class="form-control" type="file" (change)="this.seleccionarArchivo($event)">
                    </div>
                    
                    <button class="btn btn-primary w-100 mb-3" type="submit">
                        <i class="bi bi-check-circle me-2"></i>Registrarse
                    </button>

                    <div class="text-center">
                        <span class="text-muted">¿Ya tienes cuenta? </span>
                        <a routerLink="/login" class="text-decoration-none">Inicia sesión</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>